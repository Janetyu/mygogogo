## 《GoWeb编程》2017版笔记

### Go与Web应用

#### 1.1 使用Go构建Web应用

- go的可拓展Web应用
  - 有两种方式可以对性能进行扩展
    - 垂直扩展，提升单台设备的CPU数量或性能
      - 一个GoWeb应用只需要使用一个操作系统线程（OS thread），可以通过调度来高效地运行数十万个goroutine
      - go应用被编译为不包含任何动态依赖关系的静态二进制文件
    - 水平扩展，通过增加计算机的数量来提升性能
- go的模块化Web应用
  - 通过复用模块化的组件来降低软件开发所需的费用
  - go可通过它的接口机制对行为进行描述，以此来实现动态类型匹配（dynamic typing）
  - go的函数可以接受接口作为参数，所有的类型都实现了空接口，还实现了函数式编程的特性，包括函数类型、使用函数作为值以及闭包
  - go常被用于创建微服务，微服务分为系统级服务和应用级服务
- go的可维护Web应用
  - 拥有一个易于维护的代码库（codebase）
  - go的包管理系统
  - go的工程化工具：gofmt、godoc等
- go的高性能Web应用
  - 高性能的意义
    - 能够短时间内处理大量请求
    - 服务器能快速对客户端进行响应，并让终端用户（end user）快速执行操作
  - go程序会被编译为本地码（native code）
  - goroutine对并发编程提供了原生的支持

#### 1.2 Web应用的工作原理

- 从狭义的角度解析什么是Web应用：它会对客户端发送的HTTP请求做出响应，并通过HTTP响应将HTML回传至客户端
  - 从上面定义可以看成：一个Web服务器就是一个Web应用
- 完整定义**Web应用**（为了便于分辨和理解）：
  - 这个程序必须向发送命令请求的客户端返回HTML，而客户端则会向用户展示渲染后的HTML
  - 这个程序在向客户端传送数据时必须使用HTTP协议
  - 在这个定义上，如果一个好吃呢个系不是向用户渲染并展示HTML，而是向其他程序返回某种非HTML格式的数据，那么这个程序就是一个为其他程序提供服务的**Web服务**

#### 1.3 HTTP简介

- HTTP是万维网的应用层通信协议
- 至今经过了三次迭代修改，第一版为 HTTP 0.9，第二版为 HTTP 1.0，第三版为 HTTP 1.1 ，第四版 HTTP 2.0
- 什么是HTTP
  - HTTP是一种 *无状态* 、*由文本构成*  的请求-响应（ request-response ）协议，这种协议使用的是客户端-服务器（client-server）计算模型
  - 在HTTP协议中，客户端也被称作 **用户代理（user-agent）**而服务器则通常会被称为Web服务器
  - HTTP是以**纯文本方式**而不是二进制方式发送和接收协议数据的

#### 1.4 Web应用的诞生

- *通用网关接口（CGI）*是在早期尝试动态生成HTML内容的技术之一
- CGI 是一个简单的接口，允许Web服务器与一个独立允许的进程对接，通过CGI与服务器进行对接的程序通常被称为 *CGI 程序*
  - 向 CGI程序传递输入参数是通过设置环境变量来完成的
  - CGI 程序在运行之后将向标准输出（stand output）返回结果，而服务器则会将这些结果传送至客户端
- *服务器端包含（server-side includes, SSI）*技术也是 CGI 的同期技术
  - 这种技术允许开发者在HTML文件里面包含一些指令 （directive）
  - 当客户端请求一个HTML文件的时候，服务器在返回这个文件之前，会先执行文件中包含的指令，并将文件中出现指令的位置替换成这些指令的执行结果
  - SSI 最常见的用法是在 HTML 文件中包含其他被频繁使用的文件，又或者将整个网站都会出现的页面首部（Header）以及尾部（Footer）的代码段嵌入 HTML 文件中
  - SSI 技术的最终演化结果就是在 HTML 里面包含更为复杂的代码，并使用更为强大的解析器（interpreter），后面演化成 PHP、ASP、JSP 等一下Web模板引擎技术

#### 1.5 HTTP请求





